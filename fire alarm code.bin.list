EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
fire alarm code.bin -- emu8086 assembler version: 4.11 R443  
 
[ 25-04-2018  --  11:28:25 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       #make_bin#
[   2]        :                                       
[   3]        :                                       #LOAD_SEGMENT=FFFFh#
[   4]        :                                       #LOAD_OFFSET=0000h#
[   5]        :                                       
[   6]        :                                       #CS=0000h#
[   7]        :                                       #IP=0000h#
[   8]        :                                       
[   9]        :                                       #DS=0000h#
[  10]        :                                       #ES=0000h#
[  11]        :                                       
[  12]        :                                       #SS=0000h#
[  13]        :                                       #SP=0800sh#
[  14]        :                                       
[  15]        :                                       #AX=0000h#
[  16]        :                                       #BX=0000h#
[  17]        :                                       #CX=0000h#
[  18]        :                                       #DX=0000h#
[  19]        :                                       #SI=0000h#
[  20]        :                                       #DI=0000h#
[  21]        :                                       #BP=0000h#
[  22]        :                                       
[  23]        :                                       ; add your code here
[  24]    0000: E9 00 04                              JMP     ST1
[  25]    0003: 00 00 00 00 00 00 00 00 00 00 00 00   r DB      1024 DUP(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00                         
[  26]        :                                       ;main program
[  27]        :                                       
[  28]    0403:                                       ST1:
[  29]        :                                       ;clear interrupt flags
[  30]    0403: FA                                    CLI
[  31]        :                                       ; intialize ds, es,ss to start of RAM
[  32]    0404: B8 00 00                              MOV     AX,0000h
[  33]    0407: 8E D8                                 MOV     DS,AX
[  34]    0409: 8E C0                                 MOV     ES,AX
[  35]    040B: 8E D0                                 MOV     SS,AX
[  36]    040D: BC 00 08                              MOV     SP,0800H
[  37]        :                                       
[  38]        :                                       ;intialise porta & b as input &portc as output
[  39]    0410: B0 92                                 MOV     AL,92h ;10010010b
[  40]    0412: E6 06                                 OUT     06h,AL
[  41]        :                                       
[  42]        :                                       ;initialise counter mode 2 in 8253
[  43]        :                                       ;30h = address of count0 i.e. starting address for 8253
[  44]        :                                       ;count reqd = 5*10^6
[  45]        :                                       ;count0 stores 2500
[  46]    0414: B0 34                                 MOV     AL,34h
[  47]    0416: E6 36                                 OUT     36h,AL
[  48]    0418: B0 C4                                 MOV     AL,0C4h
[  49]    041A: E6 30                                 OUT     30h,AL
[  50]    041C: B0 09                                 MOV     AL,09h
[  51]    041E: E6 30                                 OUT     30h,AL
[  52]        :                                       
[  53]        :                                       ;count1 stores 2000
[  54]    0420: B0 74                                 MOV     AL,74h
[  55]    0422: E6 36                                 OUT     36h,AL
[  56]    0424: B0 D0                                 MOV     AL,0D0h
[  57]    0426: E6 32                                 OUT     32h,AL
[  58]    0428: B0 07                                 MOV     AL,07h
[  59]    042A: E6 32                                 OUT     32h,AL
[  60]        :                                       
[  61]        :                                       ;take input from smoke sensors
[  62]    042C: E4 00                                 next:   IN      AL,00h
[  63]    042E: 8A D8                                 MOV     BL,AL
[  64]        :                                       ;check if both are on or not
[  65]    0430: 80 FB 81                              CMP     BL,81h
[  66]    0433: 75 06                                 JNZ     off
[  67]        :                                       
[  68]        :                                       ;open valves, doors and windows and sound alarm
[  69]    0435: B0 C0                                 glow:	MOV     AL,0C0h
[  70]    0437: E6 04                                 OUT     04h,AL
[  71]    0439: EB 06                                 JMP     over
[  72]        :                                       	
[  73]        :                                       	    ;close valves, doors and windows
[  74]    043B: B0 FF                                 off:	MOV	    AL,0FFh
[  75]    043D: E6 04                                 	    OUT	    04h,AL
[  76]    043F: EB 00                                 JMP     over
[  77]    0441:                                       over:
[  78]        :                                       
[  79]        :                                       ;interupt generation using out of 8253 after every 2 seconds
[  80]    0441: BE 53 04                              LEA     SI,read
[  81]    0444: 3E 89 36 00 01                        MOV     DS:[256],SI  ;vector number = 40h = 64d, so location in IVT = 64*4 = 256
[  82]    0449: 8C C9                                 MOV     CX,CS
[  83]    044B: 3E 89 0E 02 01                        MOV     DS:[258],CX
[  84]        :                                       
[  85]        :                                       ;set the interrupt flags
[  86]    0450: FB                                    STI
[  87]        :                                       
[  88]        :                                       ;infinite loop, will stop only power s switched off
[  89]    0451: EB D9                                 JMP     next
[  90]        :                                       
[  91]    0453:                                       read PROC NEAR:
[  92]    0453: CF                                    IRET
[  93]        :                                       read ENDP
[  94]        :                                       
 
===================================================================================================
 




===================================================================================================
